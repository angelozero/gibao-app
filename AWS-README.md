# AWS - Amazon Certification - Developer Associate 2021

## Create an account
[Credit Card Generator](https://www.vccgenerator.com/result/)

--- 
--- 
## IAM

  - IAM - Identity Access Management
 
  - Local dentro da Amazon aonde se cria e configura usuarios, grupos, permissoes...
 
  - Multifactor Authentication
    - User / Password / Token-Auth - Acessando atraves de um token - Ex.: Google Token que dura 30 secs
 
  - Identity Federation
    - Link da plataforma aws com 
      - facebook
      - linkedin
      - AD ( active directory )
      - Twitter
 
  - Permissions
    - Configurar para que o usuario consiga por exemplo criar maquinas virtuais ( EC2 ) do tipo: SMALL/ 12G Ram / 1T Disk
 
  - Passwords
    - consegue criar uma politica de rotatividade de senha para que ela expire para realizar sua troca constante
 
  - Shared
    - compartilhamento de serviços
 
  - PCI DSS Compliance ( VISA / MASTER )
    - Segurança que prove que os dados do cliente como forma de pagamento estejam bem protegidos

  - Users
    - Contas
  - Groups
    - Grupos de acesso a Data Base / S3 / EC2 / etc...
  - Roles
    - Regras que podem ser aplicadas a Users e/ou Groups
      - Ex.: Regras de acesso/serviço
  - Polices
    - Politicas do que o usuario pode fazer
      - Police para EC2 -> Read DB1
      - Police para EC2 -> Read and Write DB2
      - Pode ser aplicado para Users / Groups / Roles
      - Digite a nova url -> sua-url-customizada
      - Deve ficar algo parecido com isso -> https://sua-url-customizada.signin.aws.amazon.com/console

--- 

- Alterando a URL para login ( Creating Alias IAM for any User )
  - IAM dashboard
  - Sign-in URL for IAM users in this account
  - Customize

- Criando autenticacao via Multi Factor Authenticator ( MFA Authenticator )
  - Canto superior direito angelo_zero ( nome da conta )
  - My Security Credentials
  - Multi-factor authentication (MFA)
  - Active MFA
    - Virtual MFA device
    - Show QR Code
    - Usando o app Google Authenticator
      - MFA code 1 ( esperar 30 segundos )
      - MFA code 2  
      - Assing MFA

--- 

- Criando Users 
  - Dentro de IAM 
  - Coluna esquerda - User
  - Add User
  - inserir nome do User
  - Selecionar o tipo de acesso que este usuario vai ter ( ambas as opcoes podem ser selecionadas )
    - Programmatic access
      - Permissao ao usuario para que ele tenha acesso a um servico dentro da AWS ( para perfil de developer )
    - AWS Management Console access
      - Logar na plataforma ( para perfil de arquiteto ) 

  - USUARIO - Programmatic access
    - Set permissions - Nesta tela sera a de permissoes, mas esta pode ser criada no momento em que vc criar um grupo para inserir este usuario
    - Add tags (optional) - Identificacoes para o usuario
      - Key: Usuario
      - Value: Usuario Programatico
    - Review
      - Revisar a criacao do usuario
        - Havera uma mensagem dizendo que este usuario nao tem permissoes, isto esta ok.
    - Create User
    - Um ponto muito importante !!!
      - na proxima tela ( Tela de criaçao do usuario com sucesso ) havera uma informacao dizendo os dados do usuario, Access key ID e Secret access key
      - Clique no botao Download .csv para realizar o download dos dados deste usuario ( dados que vao conter Access Key ID e Secret Access Key)
      - Se caso nao for anotado as keys e nem salvo o .csv sera necessario a remocao e criacao novamente do usuario

  - USUARIO - AWS Management Console access
    - Deixar selecionado 
      - Autogenerated password
      - User must create a new password at next sign-in ( para que usuario ao se logar precise alterar sua senha )
      - Sem permissoes por enquanto 
      - Add tags (optional) - Identificacoes para o usuario
      - Key: Usuario
      - Value: Web Access Plataform
    - Review - tudo ok
    - Ao final vc pode baixar o arquivo do .csv e/ou enviar um email para o usuario criado para se autenticar pela primeira vez ( alterando a senha atual pela nova )

--- 

- Criando Grupos
  - Criando dois grupos ( EC2 e Data Base )
  - User groups ou Groups ( coluna da esquerda dentro de IAM )
  - Create Group
  - Inserir o nome do grupo -> Group-Servers-EC2 / Group-Administrators-DB
  - Definir as Policys ( politicas ) de acesso do grupo
  - Para o primeiro grupo de EC2 foi definido
    - AmazonEC2FullAccess 
  - Para o segundo grupo de Data Base foi definido
    - DatabaseAdministrator 
  - Para adicionar usuario
    - No momento da criacao ou acessando o grupo posteriormente
      - Add users

--- 

- Configurando o Password Policy no IAM
  - Definindo as Policys ( politicas ) de password ( de senha ) - Algo como quanto tempo essa senha estara disponivel para o usuario
  - Dentro de IAM
  - Coluna esquerda - Account settings
  - Change Password Policy 
  - Toda alteracao realizada vai ser refletido para todos os usarios dentro da sua conta AWS
  - Sugestoes de senha:
    - Numero de caracteres
    - Pelo menos um caracter Maiusculo
    - Pelo menos um caracter Minusculo
    - Pelo menos um numero
    - Pelo menos um caracter alfa numerico
    - Senha expira ( Determinar o tempo de expiracao )
    - Administrador reseta a senha
    - Permitir usuarios alterar a senha
    - Previnir do usuario usar senha antiga

  --- 
  --- 
  ## EC2

  - EC2 - Electronic Computer 2 - Maquinas Virtuais 

  - EC2 Options
    - Existem 4 tipos de maquina
      - On Demand
        - Subir / Desligar / Ligar uma VM - Paga por Hora / Min / Segundo - Pagamento feito depois
      - Reserved 
        - Reserva / Assina um contrato com a AWS de 1 a 3 anos - Usado para uma aplicaçao que nao tem alteracao - uma aplicacao estavel
      - Spot
        - BID - Usado para quando sua aplicao fica ligada por um tempo especifico, nao o dia todo. Configuracoes fixas mas podendo ser alterados.
      - Dedicated Hosts 
        - Maquinas fisicas - sao mais caras - usado por empresas financeiras, usado por exmeplo para armazenar dados de cartao de credito.
  
  - EC2 Types
    - https://aws.amazon.com/ec2/instance-types/
    - Os tipos de instancia sao divididos em 5 categorias
      - General Purpose
      - Compute Optimized
      - Memory Optimized
      - Accelerated Computing
      - Storage Optimized

  - EC2 Pricing
    - Free Tier - 12 meses  ( t2.micro ) 
    - On Demand
      - O preço varia por 
        - Localizacao
        - Sistema Operacional
        - Tipo da maquina

  - EBS - Elastic Block Storaged
    - 

  - Iniciando uma instancia
    - Dentro da Cloud da Aws vamos criar uma instancia
    - AMI - Amazon Machine Image (AMI)
    - Dentro do serviço de EC2 escolha a opcao instance ao lado esquerdo da coluna
    
      - 1 - Choose AMI 
      - An AMI is a template that contains the software configuration (operating system, application server, and applications) required to launch your instance. You can select an AMI provided by AWS, our user community, or the AWS Marketplace; or you can select one of your own AMIs.
        - Escolher o sistema operacional / maquina que sera criada
     
      - 2 - Choose Instance Type
      - Amazon EC2 provides a wide selection of instance types optimized to fit different use cases. Instances are virtual servers that can run applications. They have varying combinations of CPU, memory, storage, and networking capacity, and give you the flexibility to choose the appropriate mix of resources for your applications.
        - Escolher o tipo de instancia
          - Ex.: t2.nano / t2.micro / t2.small
      
      - 3 - Configure Instance
      - Cancel Previous Review and Launch Next: Add Storage 
      Configure the instance to suit your requirements. You can launch multiple instances from the same AMI, request Spot instances to take advantage of the lower pricing, assign an access management role to the instance, and more.

        - Definir numero de instancias ( iniciar numero de maquinas ao mesmo tempo)
        - Configuracoes de IP
      
      - 4 - Add Storage
      - Your instance will be launched with the following storage device settings. You can attach additional EBS volumes and instance store volumes to your instance, or edit the settings of the root volume. You can also attach additional EBS volumes after launching an instance, but not instance store volumes.
        - Adicionando o HD / Volume para a maquina

      - 5 - Add Tags
      - A tag consists of a case-sensitive key-value pair. For example, you could define a tag with key = Name and value = Webserver. A copy of a tag can be applied to volumes, instances or both. Tags will be applied to all instances and volumes.
        - Adicionando TAG para a instancia criada

        - 6 - Configure Security Group
          - A security group is a set of firewall rules that control the traffic for your instance. On this page, you can add rules to allow specific traffic to reach your instance. For example, if you want to set up a web server and allow Internet traffic to reach your instance, add rules that allow unrestricted access to the HTTP and HTTPS ports. You can create a new security group or select from an existing one below.
            - Firewall para a maquina criada
            - Cria um grupo para reutilizar para outras maquinas. Ex.: configuracoes de porta para todas as maquians que estiverem nesse grupo.

      - Se conectando a maquina
        Open an SSH client.
        Run this command
          - chmod 400 linux-server.pem
        Connect to your instance using its Public DNS:
          - ssh -i "linux-server.pem" ec2-user@ec2-54-173-112-202.compute-1.amazonaws.com

  --- 
  --- 
  ## LOAD BALANCERS
    - Ha 3 tipos de loadbalancer
      
      - application loadbalancer
        - responsavel por protocolos http/https\
        - camada 7 ( qual tipo de tragego )
        - consegue identificar a origem e destino

      - network loadbalancer
        - mais especifico para redes 
        - tcp
        - camada 4 ( filtra portas )

      - classic loadbalancer ( elastic load balancer )
        - mais antigo ( legacy )
        - nao recomenda
        - fazia as duas outras ( application e network ) e isso onerava muito 
    
    - Loadbalancer utiliza um sistema chamado x-forward for header, no cabeçalho http/https aonde é preenchido com o valor do endereço de IP origem, assim toda requisiçao que chega para um servidor que passar por um loadbalancer sabe exatamente para quem devolver.

  - Criando um loadbalancer e dois servidores
    - Primeiro crie duas instancias ec2 ( linux t2.micro )
    - Adicione esse script para teste 
    ```
      #!/bin/bash
      yum update -y
      yum install httpd -y
      service httpd start
      chkconfig httpd on
      cd /var/www/html
      echo "<html><h1>Site Funcionando</h1></html>" > index.html
    ``` 
    - libere o acesso via http -> ( ver parte configure security group ) https://www.guru99.com/creating-amazon-ec2-instance.html
    - Na coluna agora ( ainda dentro de ec2 ) va em networking e crie um novo loadbalancer
    - selecione o Classic Load Balancer
    - Item Configure Health Check 
      - Response Timeout - tempo de espera para soltar timeout se caso um servidor nao responder
      - Interval - Intervalo de tempo para chamada para saber se o servidor esta de pé
      - Unhealty threshold - Quantidade de timouts para que diga que o servidor esta fora
      - Healthy threshold - Quantidade de chamadas para executar e garantir que o servidor voltou

